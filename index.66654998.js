var t,e,s,r,i,a,o,n,h,d;s={},r=function(){var t;function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this.board=t,this.clear=t,this.size=4,this.score=0,this.status=e.Status.idle}return t=[{key:"moveLeft",value:function(){for(var t=!1,e=0;e<this.size;e++){var s=this.board[e];(s=this.slide(s)).toString()!==this.board[e].toString()&&(this.board[e]=s,t=!0)}t&&(this.getRandomTitle(),this.checkGameOver(),this.renderBoard())}},{key:"moveRight",value:function(){for(var t=!1,e=0;e<this.size;e++){var s=this.board[e];s.reverse(),(s=this.slide(s)).reverse(),s.toString()!==this.board[e].reverse().toString()&&(this.board[e]=s,t=!0)}t&&(this.getRandomTitle(),this.checkGameOver(),this.renderBoard())}},{key:"moveUp",value:function(){for(var t=!1,e=0;e<this.size;e++){var s=[this.board[0][e],this.board[1][e],this.board[2][e],this.board[3][e]];s=this.slide(s);for(var r=0;r<this.size;r++)s[r].toString()!==this.board[r][e].toString()&&(t=!0),this.board[r][e]=s[r]}t&&(this.getRandomTitle(),this.checkGameOver(),this.renderBoard())}},{key:"moveDown",value:function(){for(var t=!1,e=0;e<this.size;e++){var s=[this.board[0][e],this.board[1][e],this.board[2][e],this.board[3][e]];s.reverse(),(s=this.slide(s)).reverse();for(var r=0;r<this.size;r++)s[r].toString()!==this.board[r][e].toString()&&(t=!0),this.board[r][e]=s[r]}t&&(this.getRandomTitle(),this.checkGameOver(),this.renderBoard())}},{key:"getScore",value:function(){return this.score}},{key:"getState",value:function(){return this.board}},{key:"getStatus",value:function(){return this.status}},{key:"start",value:function(){this.status=e.Status.playing,this.getRandomTitle(),this.getRandomTitle(),this.renderBoard()}},{key:"restart",value:function(){this.status=e.Status.idle,this.score=0,this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.renderBoard()}},{key:"renderBoard",value:function(){for(var t=document.querySelector(".game-field"),e=0;e<this.size;e++)for(var s=0;s<this.size;s++)t.rows[e].cells[s].textContent="",t.rows[e].cells[s].classList.value="",t.rows[e].cells[s].classList.add("field-cell"),this.board[e][s]>0&&(t.rows[e].cells[s].textContent=this.board[e][s],t.rows[e].cells[s].classList.add("field-cell--".concat(this.board[e][s])))}},{key:"getRandomTitle",value:function(){for(var t=[],e=0;e<this.size;e++)for(var s=0;s<this.size;s++)0===this.board[e][s]&&t.push({x:e,y:s});if(t.length>0){var r=t[Math.floor(Math.random()*t.length)],i=r.x,a=r.y;this.board[i][a]=.9>Math.random()?2:4}}},{key:"slide",value:function(t){for(var e=t.filter(function(t){return 0!==t}),s=0;s<e.length;s++)e[s]===e[s+1]&&(e[s]*=2,e[s+1]=0,this.score+=e[s]);for(e=e.filter(function(t){return 0!==t});e.length<this.size;)e.push(0);return e}},{key:"checkGameOver",value:function(){this.hasMoves()?this.hasWon()&&(this.status=e.Status.win):this.status=e.Status.lose}},{key:"hasMoves",value:function(){for(var t=0;t<this.size;t++)for(var e=0;e<this.size;e++)if(0===this.board[t][e]||t<this.size-1&&this.board[t][e]===this.board[t+1][e]||e<this.size-1&&this.board[t][e]===this.board[t][e+1])return!0}},{key:"hasWon",value:function(){return this.board.some(function(t){return t.includes(2048)})}}],function(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(e.prototype,t),e}(),e={idle:"idle",playing:"playing",win:"win",lose:"lose"},(t="Status")in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,i=new(s=r),a=document.querySelector(".start"),o=document.querySelector(".message-start"),n=document.querySelector(".message-win"),h=document.querySelector(".message-lose"),d=document.querySelector(".game-score"),a.addEventListener("click",function(){a.classList.contains("start")?(a.className="button restart",a.textContent="Restart",o.classList.add("hidden"),i.start()):(a.className="button start",a.textContent="Start",o.classList.remove("hidden"),n.classList.add("hidden"),h.classList.add("hidden"),d.textContent="0",i.restart())}),document.addEventListener("keyup",function(t){var e;switch(t.preventDefault(),t.key){case"ArrowUp":i.moveUp();break;case"ArrowDown":i.moveDown();break;case"ArrowRight":i.moveRight();break;case"ArrowLeft":i.moveLeft()}d.textContent=i.getScore(),(e=i.getStatus())===s.Status.win?n.classList.remove("hidden"):e===s.Status.lose&&h.classList.remove("hidden")});
//# sourceMappingURL=index.66654998.js.map

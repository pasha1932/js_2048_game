var t={};class e{static Status={idle:"idle",playing:"playing",win:"win",lose:"lose"};constructor(t=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]){this.board=t,this.clear=t,this.size=4,this.score=0,this.status=e.Status.idle}moveLeft(){let t=!1;for(let e=0;e<this.size;e++){let s=this.board[e];(s=this.slide(s)).toString()!==this.board[e].toString()&&(this.board[e]=s,t=!0)}t&&(this.getRandomTitle(),this.checkGameOver(),this.renderBoard())}moveRight(){let t=!1;for(let e=0;e<this.size;e++){let s=this.board[e];s.reverse(),(s=this.slide(s)).reverse(),s.toString()!==this.board[e].reverse().toString()&&(this.board[e]=s,t=!0)}t&&(this.getRandomTitle(),this.checkGameOver(),this.renderBoard())}moveUp(){let t=!1;for(let e=0;e<this.size;e++){let s=[this.board[0][e],this.board[1][e],this.board[2][e],this.board[3][e]];s=this.slide(s);for(let r=0;r<this.size;r++)s[r].toString()!==this.board[r][e].toString()&&(t=!0),this.board[r][e]=s[r]}t&&(this.getRandomTitle(),this.checkGameOver(),this.renderBoard())}moveDown(){let t=!1;for(let e=0;e<this.size;e++){let s=[this.board[0][e],this.board[1][e],this.board[2][e],this.board[3][e]];s.reverse(),(s=this.slide(s)).reverse();for(let r=0;r<this.size;r++)s[r].toString()!==this.board[r][e].toString()&&(t=!0),this.board[r][e]=s[r]}t&&(this.getRandomTitle(),this.checkGameOver(),this.renderBoard())}getScore(){return this.score}getState(){return this.board}getStatus(){return this.status}start(){this.status=e.Status.playing,this.getRandomTitle(),this.getRandomTitle(),this.renderBoard()}restart(){this.status=e.Status.idle,this.score=0,this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.renderBoard()}renderBoard(){let t=document.querySelector(".game-field");for(let e=0;e<this.size;e++)for(let s=0;s<this.size;s++)t.rows[e].cells[s].textContent="",t.rows[e].cells[s].classList.value="",t.rows[e].cells[s].classList.add("field-cell"),this.board[e][s]>0&&(t.rows[e].cells[s].textContent=this.board[e][s],t.rows[e].cells[s].classList.add(`field-cell--${this.board[e][s]}`))}getRandomTitle(){let t=[];for(let e=0;e<this.size;e++)for(let s=0;s<this.size;s++)0===this.board[e][s]&&t.push({x:e,y:s});if(t.length>0){let{x:e,y:s}=t[Math.floor(Math.random()*t.length)];this.board[e][s]=.9>Math.random()?2:4}}slide(t){let e=t.filter(t=>0!==t);for(let t=0;t<e.length;t++)e[t]===e[t+1]&&(e[t]*=2,e[t+1]=0,this.score+=e[t]);for(e=e.filter(t=>0!==t);e.length<this.size;)e.push(0);return e}checkGameOver(){this.hasMoves()?this.hasWon()&&(this.status=e.Status.win):this.status=e.Status.lose}hasMoves(){for(let t=0;t<this.size;t++)for(let e=0;e<this.size;e++)if(0===this.board[t][e]||t<this.size-1&&this.board[t][e]===this.board[t+1][e]||e<this.size-1&&this.board[t][e]===this.board[t][e+1])return!0}hasWon(){return this.board.some(t=>t.includes(2048))}}const s=new(t=e),r=document.querySelector(".start"),i=document.querySelector(".message-start"),o=document.querySelector(".message-win"),a=document.querySelector(".message-lose"),h=document.querySelector(".game-score");r.addEventListener("click",()=>{r.classList.contains("start")?(r.className="button restart",r.textContent="Restart",i.classList.add("hidden"),s.start()):(r.className="button start",r.textContent="Start",i.classList.remove("hidden"),o.classList.add("hidden"),a.classList.add("hidden"),h.textContent="0",s.restart())}),document.addEventListener("keyup",e=>{switch(e.preventDefault(),e.key){case"ArrowUp":s.moveUp();break;case"ArrowDown":s.moveDown();break;case"ArrowRight":s.moveRight();break;case"ArrowLeft":s.moveLeft()}h.textContent=s.getScore(),function(){let e=s.getStatus();e===t.Status.win?o.classList.remove("hidden"):e===t.Status.lose&&a.classList.remove("hidden")}()});
//# sourceMappingURL=index.e52ec50f.js.map
